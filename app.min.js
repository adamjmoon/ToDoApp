var requirejs,require,define;(function(Z){function H(e){return"[object Function]"===L.call(e)}function I(e){return"[object Array]"===L.call(e)}function y(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function M(e,t){if(e){var n;for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}}function s(e,t){return ga.call(e,t)}function l(e,t){return s(e,t)&&e[t]}function F(e,t){for(var n in e)if(s(e,n)&&t(e[n],n))break}function Q(e,t,n,r){t&&F(t,function(t,i){if(n||!s(e,i))r&&"string"!==typeof t?(e[i]||(e[i]={}),Q(e[i],t,n,r)):e[i]=t});return e}function u(e,t){return function(){return t.apply(e,arguments)}}function aa(e){throw e}function ba(e){if(!e)return e;var t=Z;y(e.split("."),function(e){t=t[e]});return t}function A(e,t,n,r){t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);t.requireType=e;t.requireModules=r;n&&(t.originalError=n);return t}function ha(e){function t(e,t,n){var r,i,s,o,u,a,f,c=t&&t.split("/");r=c;var h=N.map,p=h&&h["*"];if(e&&"."===e.charAt(0))if(t){r=l(N.pkgs,t)?c=[t]:c.slice(0,c.length-1);t=e=r.concat(e.split("/"));for(r=0;t[r];r+=1)if(i=t[r],"."===i)t.splice(r,1),r-=1;else if(".."===i)if(1===r&&(".."===t[2]||".."===t[0]))break;else 0<r&&(t.splice(r-1,2),r-=2);r=l(N.pkgs,t=e[0]);e=e.join("/");r&&e===t+"/"+r.main&&(e=t)}else 0===e.indexOf("./")&&(e=e.substring(2));if(n&&h&&(c||p)){t=e.split("/");for(r=t.length;0<r;r-=1){s=t.slice(0,r).join("/");if(c)for(i=c.length;0<i;i-=1)if(n=l(h,c.slice(0,i).join("/")))if(n=l(n,s)){o=n;u=r;break}if(o)break;!a&&p&&l(p,s)&&(a=l(p,s),f=r)}!o&&a&&(o=a,u=f);o&&(t.splice(0,u,o),e=t.join("/"))}return e}function n(e){z&&y(document.getElementsByTagName("script"),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===S.contextName)return t.parentNode.removeChild(t),!0})}function r(e){var t=l(N.paths,e);if(t&&I(t)&&1<t.length)return n(e),t.shift(),S.require.undef(e),S.require([e]),!0}function i(e){var t,n=e?e.indexOf("!"):-1;-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length));return[t,e]}function o(e,n,r,s){var o,u,a=null,f=n?n.name:null,c=e,h=!0,p="";e||(h=!1,e="_@r"+(B+=1));e=i(e);a=e[0];e=e[1];a&&(a=t(a,f,s),u=l(_,a));e&&(a?p=u&&u.normalize?u.normalize(e,function(e){return t(e,f,s)}):t(e,f,s):(p=t(e,f,s),e=i(p),a=e[0],p=e[1],r=!0,o=S.nameToUrl(p)));r=a&&!u&&!r?"_unnormalized"+(q+=1):"";return{prefix:a,name:p,parentMap:n,unnormalized:!!r,url:o,originalName:c,isDefine:h,id:(a?a+"!"+p:p)+r}}function a(e){var t=e.id,n=l(C,t);n||(n=C[t]=new S.Module(e));return n}function f(e,t,n){var r=e.id,i=l(C,r);if(s(_,r)&&(!i||i.defineEmitComplete))"defined"===t&&n(_[r]);else if(i=a(e),i.error&&"error"===t)n(i.error);else i.on(t,n)}function c(e,t){var n=e.requireModules,r=!1;if(t)t(e);else if(y(n,function(t){if(t=l(C,t))t.error=e,t.events.error&&(r=!0,t.emit("error",e))}),!r)j.onError(e)}function h(){R.length&&(ia.apply(M,[M.length-1,0].concat(R)),R=[])}function p(e){delete C[e];delete k[e]}function d(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,y(e.depMaps,function(r,i){var s=r.id,o=l(C,s);o&&!e.depMatched[i]&&!n[s]&&(l(t,s)?(e.defineDep(i,_[s]),e.check()):d(o,t,n))}),n[r]=!0)}function v(){var e,t,i,s,o=(i=1e3*N.waitSeconds)&&S.startTime+i<(new Date).getTime(),u=[],a=[],f=!1,l=!0;if(!w){w=!0;F(k,function(i){e=i.map;t=e.id;if(i.enabled&&(e.isDefine||a.push(i),!i.error))if(!i.inited&&o)r(t)?f=s=!0:(u.push(t),n(t));else if(!i.inited&&i.fetched&&e.isDefine&&(f=!0,!e.prefix))return l=!1});if(o&&u.length)return i=A("timeout","Load timeout for modules: "+u,null,u),i.contextName=S.contextName,c(i);l&&y(a,function(e){d(e,{},{})});if((!o||s)&&f)if((z||da)&&!T)T=setTimeout(function(){T=0;v()},50);w=!1}}function m(e){s(_,e[0])||a(o(e[0],null,!0)).init(e[1],e[2])}function g(e){var e=e.currentTarget||e.srcElement,t=S.onScriptLoad;e.detachEvent&&!W?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1);t=S.onScriptError;(!e.detachEvent||W)&&e.removeEventListener("error",t,!1);return{node:e,id:e&&e.getAttribute("data-requiremodule")}}function b(){var e;for(h();M.length;){e=M.shift();if(null===e[0])return c(A("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));m(e)}}var w,E,S,x,T,N={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},C={},k={},L={},M=[],_={},D={},B=1,q=1;x={require:function(e){return e.require?e.require:e.require=S.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?e.exports:e.exports=_[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){var t=l(N.pkgs,e.map.id);return(t?l(N.config,e.map.id+"/"+t.main):l(N.config,e.map.id))||{}},exports:_[e.map.id]}}};E=function(e){this.events=l(L,e.id)||{};this.map=e;this.shim=l(N.shim,e.id);this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};E.prototype={init:function(e,t,n,r){r=r||{};if(!this.inited){this.factory=t;if(n)this.on("error",n);else this.events.error&&(n=u(this,function(e){this.emit("error",e)}));this.depMaps=e&&e.slice(0);this.errback=n;this.inited=!0;this.ignore=r.ignore;r.enabled||this.enabled?this.enable():this.check()}},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0;S.startTime=(new Date).getTime();var e=this.map;if(this.shim)S.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}));else return e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;D[e]||(D[e]=!0,S.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var r=this.exports,i=this.factory;if(this.inited)if(this.error)this.emit("error",this.error);else{if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(H(i)){if(this.events.error&&this.map.isDefine||j.onError!==aa)try{r=S.execCb(n,i,t,r)}catch(s){e=s}else r=S.execCb(n,i,t,r);this.map.isDefine&&((t=this.module)&&void 0!==t.exports&&t.exports!==this.exports?r=t.exports:void 0===r&&this.usingExports&&(r=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else r=i;this.exports=r;if(this.map.isDefine&&!this.ignore&&(_[n]=r,j.onResourceLoad))j.onResourceLoad(S,this.map,this.depMaps);p(n);this.defined=!0}this.defining=!1;this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,n=e.id,r=o(e.prefix);this.depMaps.push(r);f(r,"defined",u(this,function(r){var i,h;h=this.map.name;var d=this.map.parentMap?this.map.parentMap.name:null,v=S.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(r.normalize&&(h=r.normalize(h,function(e){return t(e,d,!0)})||""),r=o(e.prefix+"!"+h,this.map.parentMap),f(r,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),h=l(C,r.id)){this.depMaps.push(r);if(this.events.error)h.on("error",u(this,function(e){this.emit("error",e)}));h.enable()}}else i=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=u(this,function(e){this.inited=!0;this.error=e;e.requireModules=[n];F(C,function(e){0===e.map.id.indexOf(n+"_unnormalized")&&p(e.map.id)});c(e)}),i.fromText=u(this,function(t,r){var u=e.name,f=o(u),l=O;r&&(t=r);l&&(O=!1);a(f);s(N.config,n)&&(N.config[u]=N.config[n]);try{j.exec(t)}catch(h){return c(A("fromtexteval","fromText eval for "+n+" failed: "+h,h,[n]))}l&&(O=!0);this.depMaps.push(f);S.completeLoad(u);v([u],i)}),r.load(e.name,v,i,N)}));S.enable(r,this);this.pluginMaps[r.id]=r},enable:function(){k[this.map.id]=this;this.enabling=this.enabled=!0;y(this.depMaps,u(this,function(e,t){var n,r;if("string"===typeof e){e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap);this.depMaps[t]=e;if(n=l(x,e.id)){this.depExports[t]=n(this);return}this.depCount+=1;f(e,"defined",u(this,function(e){this.defineDep(t,e);this.check()}));this.errback&&f(e,"error",u(this,this.errback))}n=e.id;r=C[n];!s(x,n)&&r&&!r.enabled&&S.enable(e,this)}));F(this.pluginMaps,u(this,function(e){var t=l(C,e.id);t&&!t.enabled&&S.enable(e,this)}));this.enabling=!1;this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]);n.push(t)},emit:function(e,t){y(this.events[e],function(e){e(t)});"error"===e&&delete this.events[e]}};S={config:N,contextName:e,registry:C,defined:_,urlFetched:D,defQueue:M,Module:E,makeModuleMap:o,nextTick:j.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=N.pkgs,n=N.shim,r={paths:!0,config:!0,map:!0};F(e,function(e,t){r[t]?"map"===t?(N.map||(N.map={}),Q(N[t],e,!0,!0)):Q(N[t],e,!0):N[t]=e});e.shim&&(F(e.shim,function(e,t){I(e)&&(e={deps:e});if((e.exports||e.init)&&!e.exportsFn)e.exportsFn=S.makeShimExports(e);n[t]=e}),N.shim=n);e.packages&&(y(e.packages,function(e){e="string"===typeof e?{name:e}:e;t[e.name]={name:e.name,location:e.location||e.name,main:(e.main||"main").replace(ja,"").replace(ea,"")}}),N.pkgs=t);F(C,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=o(t))});if(e.deps||e.callback)S.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;e.init&&(t=e.init.apply(Z,arguments));return t||e.exports&&ba(e.exports)}},makeRequire:function(n,r){function i(t,u,f){var l,h;r.enableBuildCallback&&u&&H(u)&&(u.__requireJsBuild=!0);if("string"===typeof t){if(H(u))return c(A("requireargs","Invalid require call"),f);if(n&&s(x,t))return x[t](C[n.id]);if(j.get)return j.get(S,t,n,i);l=o(t,n,!1,!0);l=l.id;return!s(_,l)?c(A("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(n?"":". Use require([])"))):_[l]}b();S.nextTick(function(){b();h=a(o(null,n));h.skipMap=r.skipMap;h.init(t,u,f,{enabled:!0});v()});return i}r=r||{};Q(i,{isBrowser:z,toUrl:function(e){var r,i=e.lastIndexOf("."),s=e.split("/")[0];if(-1!==i&&(!("."===s||".."===s)||1<i))r=e.substring(i,e.length),e=e.substring(0,i);return S.nameToUrl(t(e,n&&n.id,!0),r,!0)},defined:function(e){return s(_,o(e,n,!1,!0).id)},specified:function(e){e=o(e,n,!1,!0).id;return s(_,e)||s(C,e)}});n||(i.undef=function(e){h();var t=o(e,n,!0),r=l(C,e);delete _[e];delete D[t.url];delete L[e];r&&(r.events.defined&&(L[e]=r.events),p(e))});return i},enable:function(e){l(C,e.id)&&a(e).enable()},completeLoad:function(e){var t,n,i=l(N.shim,e)||{},o=i.exports;for(h();M.length;){n=M.shift();if(null===n[0]){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);m(n)}n=l(C,e);if(!t&&!s(_,e)&&n&&!n.inited){if(N.enforceDefine&&(!o||!ba(o)))return r(e)?void 0:c(A("nodefine","No define call for "+e,null,[e]));m([e,i.deps||[],i.exportsFn])}v()},nameToUrl:function(e,t,n){var r,i,s,o,u,a;if(j.jsExtRegExp.test(e))o=e+(t||"");else{r=N.paths;i=N.pkgs;o=e.split("/");for(u=o.length;0<u;u-=1)if(a=o.slice(0,u).join("/"),s=l(i,a),a=l(r,a)){I(a)&&(a=a[0]);o.splice(0,u,a);break}else if(s){e=e===s.name?s.location+"/"+s.main:s.location;o.splice(0,u,e);break}o=o.join("/");o+=t||(/\?/.test(o)||n?"":".js");o=("/"===o.charAt(0)||o.match(/^[\w\+\.\-]+:/)?"":N.baseUrl)+o}return N.urlArgs?o+((-1===o.indexOf("?")?"?":"&")+N.urlArgs):o},load:function(e,t){j.load(S,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||ka.test((e.currentTarget||e.srcElement).readyState))P=null,e=g(e),S.completeLoad(e.id)},onScriptError:function(e){var t=g(e);if(!r(t.id))return c(A("scripterror","Script error for: "+t.id,e,[t.id]))}};S.require=S.makeRequire();return S}var j,w,x,C,J,D,P,K,q,fa,la=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,ma=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,ea=/\.js$/,ja=/^\.\//;w=Object.prototype;var L=w.toString,ga=w.hasOwnProperty,ia=Array.prototype.splice,z=!!("undefined"!==typeof window&&navigator&&window.document),da=!z&&"undefined"!==typeof importScripts,ka=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,W="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),E={},t={},R=[],O=!1;if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(H(requirejs))return;t=requirejs;requirejs=void 0}"undefined"!==typeof require&&!H(require)&&(t=require,require=void 0);j=requirejs=function(e,t,n,r){var i,s="_";!I(e)&&"string"!==typeof e&&(i=e,I(t)?(e=t,t=n,n=r):e=[]);i&&i.context&&(s=i.context);(r=l(E,s))||(r=E[s]=j.s.newContext(s));i&&r.configure(i);return r.require(e,t,n)};j.config=function(e){return j(e)};j.nextTick="undefined"!==typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()};require||(require=j);j.version="2.1.8";j.jsExtRegExp=/^\/|:|\?|\.js$/;j.isBrowser=z;w=j.s={contexts:E,newContext:ha};j({});y(["toUrl","undef","defined","specified"],function(e){j[e]=function(){var t=E._;return t.require[e].apply(t,arguments)}});if(z&&(x=w.head=document.getElementsByTagName("head")[0],C=document.getElementsByTagName("base")[0]))x=w.head=C.parentNode;j.onError=aa;j.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");t.type=e.scriptType||"text/javascript";t.charset="utf-8";t.async=!0;return t};j.load=function(e,t,n){var r=e&&e.config||{};if(z)return r=j.createNode(r,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),r.attachEvent&&!(r.attachEvent.toString&&0>r.attachEvent.toString().indexOf("[native code"))&&!W?(O=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)):(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)),r.src=n,K=r,C?x.insertBefore(r,C):x.appendChild(r),K=null,r;if(da)try{importScripts(n),e.completeLoad(t)}catch(i){e.onError(A("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}};z&&M(document.getElementsByTagName("script"),function(e){x||(x=e.parentNode);if(J=e.getAttribute("data-main"))return q=J,t.baseUrl||(D=q.split("/"),q=D.pop(),fa=D.length?D.join("/")+"/":"./",t.baseUrl=fa),q=q.replace(ea,""),j.jsExtRegExp.test(q)&&(q=J),t.deps=t.deps?t.deps.concat(q):[q],!0});define=function(e,t,n){var r,i;"string"!==typeof e&&(n=t,t=e,e=null);I(t)||(n=t,t=null);!t&&H(n)&&(t=[],n.length&&(n.toString().replace(la,"").replace(ma,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t)));if(O){if(!(r=K))P&&"interactive"===P.readyState||M(document.getElementsByTagName("script"),function(e){if("interactive"===e.readyState)return P=e}),r=P;r&&(e||(e=r.getAttribute("data-requiremodule")),i=E[r.getAttribute("data-requirecontext")])}(i?i.defQueue:R).push([e,t,n])};define.amd={jQuery:!0};j.exec=function(b){return eval(b)};j(t)}})(this)
define("durandal/system",["require","jquery"],function(e,t){function n(e){var t="[object "+e+"]";u["is"+e]=function(e){return o.call(e)==t}}var r=!1,i=Object.keys,s=Object.prototype.hasOwnProperty,o=Object.prototype.toString,u,a=!1,f=Array.isArray,l=Array.prototype.slice;if(Function.prototype.bind&&(typeof console=="object"||typeof console=="function")&&typeof console.log=="object")try{["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.call(console[e],console)},Function.prototype.bind)}catch(c){a=!0}e.on&&e.on("moduleLoaded",function(e,t){u.setModuleId(e,t)}),typeof requirejs!="undefined"&&(requirejs.onResourceLoad=function(e,t,n){u.setModuleId(e.defined[t.id],t.id)});var h=function(){},p=function(){try{if(typeof console!="undefined"&&typeof console.log=="function")if(window.opera){var e=0;while(e<arguments.length)console.log("Item "+(e+1)+": "+arguments[e]),e++}else l.call(arguments).length==1&&typeof l.call(arguments)[0]=="string"?console.log(l.call(arguments).toString()):console.log.apply(console,l.call(arguments));else(!Function.prototype.bind||a)&&typeof console!="undefined"&&typeof console.log=="object"&&Function.prototype.call.call(console.log,console,l.call(arguments))}catch(t){}},d=function(e){throw e instanceof Error?e:new Error(e)};u={version:"2.0.0",noop:h,getModuleId:function(e){return e?typeof e=="function"?e.prototype.__moduleId__:typeof e=="string"?null:e.__moduleId__:null},setModuleId:function(e,t){if(!e)return;if(typeof e=="function"){e.prototype.__moduleId__=t;return}if(typeof e=="string")return;e.__moduleId__=t},resolveObject:function(e){return u.isFunction(e)?new e:e},debug:function(e){return arguments.length==1&&(r=e,r?(this.log=p,this.error=d,this.log("Debug:Enabled")):(this.log("Debug:Disabled"),this.log=h,this.error=h)),r},log:h,error:h,assert:function(e,t){e||u.error(new Error(t||"Assert:Failed"))},defer:function(e){return t.Deferred(e)},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})},acquire:function(){var t,n=arguments[0],r=!1;return u.isArray(n)?(t=n,r=!0):t=l.call(arguments,0),this.defer(function(n){e(t,function(){var e=arguments;setTimeout(function(){e.length>1||r?n.resolve(l.call(e,0)):n.resolve(e[0])},1)},function(e){n.reject(e)})}).promise()},extend:function(e){var t=l.call(arguments,1);for(var n=0;n<t.length;n++){var r=t[n];if(r)for(var i in r)e[i]=r[i]}return e},wait:function(e){return u.defer(function(t){setTimeout(t.resolve,e)}).promise()}},u.keys=i||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)s.call(e,n)&&(t[t.length]=n);return t},u.isElement=function(e){return!!e&&e.nodeType===1},u.isArray=f||function(e){return o.call(e)=="[object Array]"},u.isObject=function(e){return e===Object(e)},u.isBoolean=function(e){return typeof e=="boolean"},u.isPromise=function(e){return e&&u.isFunction(e.then)};var v=["Arguments","Function","String","Number","Date","RegExp"];for(var m=0;m<v.length;m++)n(v[m]);return u}),define("durandal/viewEngine",["durandal/system","jquery"],function(e,t){var n;return t.parseHTML?n=function(e){return t.parseHTML(e)}:n=function(e){return t(e).get()},{viewExtension:".html",viewPlugin:"text",isViewUrl:function(e){return e.indexOf(this.viewExtension,e.length-this.viewExtension.length)!==-1},convertViewUrlToViewId:function(e){return e.substring(0,e.length-this.viewExtension.length)},convertViewIdToRequirePath:function(e){return this.viewPlugin+"!"+e+this.viewExtension},parseMarkup:n,processMarkup:function(e){var t=this.parseMarkup(e);return this.ensureSingleElement(t)},ensureSingleElement:function(e){if(e.length==1)return e[0];var n=[];for(var r=0;r<e.length;r++){var i=e[r];if(i.nodeType!=8){if(i.nodeType==3){var s=/\S/.test(i.nodeValue);if(!s)continue}n.push(i)}}return n.length>1?t(n).wrapAll('<div class="durandal-wrapper"></div>').parent().get(0):n[0]},createView:function(t){var n=this,r=this.convertViewIdToRequirePath(t);return e.defer(function(i){e.acquire(r).then(function(e){var r=n.processMarkup(e);r.setAttribute("data-view",t),i.resolve(r)}).fail(function(e){n.createFallbackView(t,r,e).then(function(e){e.setAttribute("data-view",t),i.resolve(e)})})}).promise()},createFallbackView:function(t,n,r){var i=this,s='View Not Found. Searched for "'+t+'" via path "'+n+'".';return e.defer(function(e){e.resolve(i.processMarkup('<div class="durandal-view-404">'+s+"</div>"))}).promise()}}}),define("durandal/viewLocator",["durandal/system","durandal/viewEngine"],function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=r.getAttribute("data-view");if(i==t)return r}}function r(e){return(e+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}return{useConvention:function(e,t,n){e=e||"viewmodels",t=t||"views",n=n||t;var i=new RegExp(r(e),"gi");this.convertModuleIdToViewId=function(e){return e.replace(i,t)},this.translateViewIdToArea=function(e,t){return!t||t=="partial"?n+"/"+e:n+"/"+t+"/"+e}},locateViewForObject:function(t,n,r){var i;if(t.getView){i=t.getView();if(i)return this.locateView(i,n,r)}if(t.viewUrl)return this.locateView(t.viewUrl,n,r);var s=e.getModuleId(t);return s?this.locateView(this.convertModuleIdToViewId(s),n,r):this.locateView(this.determineFallbackViewId(t),n,r)},convertModuleIdToViewId:function(e){return e},determineFallbackViewId:function(e){var t=/function (.{1,})\(/,n=t.exec(e.constructor.toString()),r=n&&n.length>1?n[1]:"";return"views/"+r},translateViewIdToArea:function(e,t){return e},locateView:function(r,i,s){if(typeof r=="string"){var o;t.isViewUrl(r)?o=t.convertViewUrlToViewId(r):o=r,i&&(o=this.translateViewIdToArea(o,i));if(s){var u=n(s,o);if(u)return e.defer(function(e){e.resolve(u)}).promise()}return t.createView(o)}return e.defer(function(e){e.resolve(r)}).promise()}}}),define("durandal/binder",["durandal/system","knockout"],function(e,t){function n(t){return t===undefined?{applyBindings:!0}:e.isBoolean(t)?{applyBindings:t}:(t.applyBindings===undefined&&(t.applyBindings=!0),t)}function r(r,f,l,c){if(!f||!l){i.throwOnErrors?e.error(s):e.log(s,f,c);return}if(!f.getAttribute){i.throwOnErrors?e.error(o):e.log(o,f,c);return}var h=f.getAttribute("data-view");try{var p;return r&&r.binding&&(p=r.binding(f)),p=n(p),i.binding(c,f,p),p.applyBindings?(e.log("Binding",h,c),t.applyBindings(l,f)):r&&t.utils.domData.set(f,a,{$data:r}),i.bindingComplete(c,f,p),r&&r.bindingComplete&&r.bindingComplete(f),t.utils.domData.set(f,u,p),p}catch(d){d.message=d.message+";\nView: "+h+";\nModuleId: "+e.getModuleId(c),i.throwOnErrors?e.error(d):e.log(d.message)}}var i,s="Insufficient Information to Bind",o="Unexpected View Type",u="durandal-binding-instruction",a="__ko_bindingContext__";return i={binding:e.noop,bindingComplete:e.noop,throwOnErrors:!1,getBindingInstruction:function(e){return t.utils.domData.get(e,u)},bindContext:function(e,t,n){return n&&e&&(e=e.createChildContext(n)),r(n,t,e,n||(e?e.$data:null))},bind:function(e,t){return r(e,t,e,e)}}}),define("durandal/activator",["durandal/system","knockout"],function(e,t){function n(e){return e==undefined&&(e={}),e.closeOnDeactivate||(e.closeOnDeactivate=f.defaults.closeOnDeactivate),e.beforeActivate||(e.beforeActivate=f.defaults.beforeActivate),e.afterDeactivate||(e.afterDeactivate=f.defaults.afterDeactivate),e.affirmations||(e.affirmations=f.defaults.affirmations),e.interpretResponse||(e.interpretResponse=f.defaults.interpretResponse),e.areSameItem||(e.areSameItem=f.defaults.areSameItem),e}function r(t,n,r){return e.isArray(r)?t[n].apply(t,r):t[n](r)}function i(t,n,r,i,s){if(t&&t.deactivate){e.log("Deactivating",t);var o;try{o=t.deactivate(n)}catch(u){e.error(u),i.resolve(!1);return}o&&o.then?o.then(function(){r.afterDeactivate(t,n,s),i.resolve(!0)},function(t){e.log(t),i.resolve(!1)}):(r.afterDeactivate(t,n,s),i.resolve(!0))}else t&&r.afterDeactivate(t,n,s),i.resolve(!0)}function s(t,n,i,s){if(t)if(t.activate){e.log("Activating",t);var o;try{o=r(t,"activate",s)}catch(u){e.error(u),i(!1);return}o&&o.then?o.then(function(){n(t),i(!0)},function(t){e.log(t),i(!1)}):(n(t),i(!0))}else n(t),i(!0);else i(!0)}function o(t,n,r){return r.lifecycleData=null,e.defer(function(i){if(t&&t.canDeactivate){var s;try{s=t.canDeactivate(n)}catch(o){e.error(o),i.resolve(!1);return}s.then?s.then(function(e){r.lifecycleData=e,i.resolve(r.interpretResponse(e))},function(t){e.error(t),i.resolve(!1)}):(r.lifecycleData=s,i.resolve(r.interpretResponse(s)))}else i.resolve(!0)}).promise()}function u(t,n,i,s){return i.lifecycleData=null,e.defer(function(o){if(t==n()){o.resolve(!0);return}if(t&&t.canActivate){var u;try{u=r(t,"canActivate",s)}catch(a){e.error(a),o.resolve(!1);return}u.then?u.then(function(e){i.lifecycleData=e,o.resolve(i.interpretResponse(e))},function(t){e.error(t),o.resolve(!1)}):(i.lifecycleData=u,o.resolve(i.interpretResponse(u)))}else o.resolve(!0)}).promise()}function a(r,a){var f=t.observable(null),l;a=n(a);var c=t.computed({read:function(){return f()},write:function(e){c.viaSetter=!0,c.activateItem(e)}});return c.__activator__=!0,c.settings=a,a.activator=c,c.isActivating=t.observable(!1),c.canDeactivateItem=function(e,t){return o(e,t,a)},c.deactivateItem=function(t,n){return e.defer(function(e){c.canDeactivateItem(t,n).then(function(r){r?i(t,n,a,e,f):(c.notifySubscribers(),e.resolve(!1))})}).promise()},c.canActivateItem=function(e,t){return u(e,f,a,t)},c.activateItem=function(t,n){var r=c.viaSetter;return c.viaSetter=!1,e.defer(function(o){if(c.isActivating()){o.resolve(!1);return}c.isActivating(!0);var u=f();if(a.areSameItem(u,t,l,n)){c.isActivating(!1),o.resolve(!0);return}c.canDeactivateItem(u,a.closeOnDeactivate).then(function(h){h?c.canActivateItem(t,n).then(function(h){h?e.defer(function(e){i(u,a.closeOnDeactivate,a,e)}).promise().then(function(){t=a.beforeActivate(t,n),s(t,f,function(e){l=n,c.isActivating(!1),o.resolve(e)},n)}):(r&&c.notifySubscribers(),c.isActivating(!1),o.resolve(!1))}):(r&&c.notifySubscribers(),c.isActivating(!1),o.resolve(!1))})}).promise()},c.canActivate=function(){var e;return r?(e=r,r=!1):e=c(),c.canActivateItem(e)},c.activate=function(){var e;return r?(e=r,r=!1):e=c(),c.activateItem(e)},c.canDeactivate=function(e){return c.canDeactivateItem(c(),e)},c.deactivate=function(e){return c.deactivateItem(c(),e)},c.includeIn=function(e){e.canActivate=function(){return c.canActivate()},e.activate=function(){return c.activate()},e.canDeactivate=function(e){return c.canDeactivate(e)},e.deactivate=function(e){return c.deactivate(e)}},a.includeIn?c.includeIn(a.includeIn):r&&c.activate(),c.forItems=function(t){a.closeOnDeactivate=!1,a.determineNextItemToActivate=function(e,t){var n=t-1;return n==-1&&e.length>1?e[1]:n>-1&&n<e.length-1?e[n]:null},a.beforeActivate=function(e){var n=c();if(!e)e=a.determineNextItemToActivate(t,n?t.indexOf(n):0);else{var r=t.indexOf(e);r==-1?t.push(e):e=t()[r]}return e},a.afterDeactivate=function(e,n){n&&t.remove(e)};var n=c.canDeactivate;c.canDeactivate=function(r){return r?e.defer(function(e){function n(){for(var t=0;t<s.length;t++)if(!s[t]){e.resolve(!1);return}e.resolve(!0)}var i=t(),s=[];for(var o=0;o<i.length;o++)c.canDeactivateItem(i[o],r).then(function(e){s.push(e),s.length==i.length&&n()})}).promise():n()};var r=c.deactivate;return c.deactivate=function(n){return n?e.defer(function(e){function r(r){c.deactivateItem(r,n).then(function(){s++,t.remove(r),s==o&&e.resolve()})}var i=t(),s=0,o=i.length;for(var u=0;u<o;u++)r(i[u])}).promise():r()},c},c}var f,l={closeOnDeactivate:!0,affirmations:["yes","ok","true"],interpretResponse:function(n){return e.isObject(n)&&(n=n.can||!1),e.isString(n)?t.utils.arrayIndexOf(this.affirmations,n.toLowerCase())!==-1:n},areSameItem:function(e,t,n,r){return e==t},beforeActivate:function(e){return e},afterDeactivate:function(e,t,n){t&&n&&n(null)}};return f={defaults:l,create:a,isActivator:function(e){return e&&e.__activator__}},f}),define("durandal/composition",["durandal/system","durandal/viewLocator","durandal/binder","durandal/viewEngine","durandal/activator","jquery","knockout"],function(e,t,n,r,i,s,o){function u(e){var t=[],n={childElements:t,activeView:null},r=o.virtualElements.firstChild(e);while(r)r.nodeType==1&&(t.push(r),r.getAttribute(m)&&(n.activeView=r)),r=o.virtualElements.nextSibling(r);return n.activeView||(n.activeView=t[0]),n}function a(){b--,b===0&&setTimeout(function(){var e=y.length;while(e--)y[e]();y=[]},1)}function f(t,n,r){if(r)n();else if(t.activate&&t.model&&t.model.activate){var i;e.isArray(t.activationData)?i=t.model.activate.apply(t.model,t.activationData):i=t.model.activate(t.activationData),i&&i.then?i.then(n):i||i===undefined?n():a()}else n()}function l(){var t=this;t.activeView&&t.activeView.removeAttribute(m),t.child&&(t.model&&t.model.attached&&(t.composingNewView||t.alwaysTriggerAttach)&&t.model.attached(t.child,t.parent,t),t.attached&&t.attached(t.child,t.parent,t),t.child.setAttribute(m,!0),t.composingNewView&&t.model&&(t.model.compositionComplete&&g.current.complete(function(){t.model.compositionComplete(t.child,t.parent,t)}),t.model.detached&&o.utils.domNodeDisposal.addDisposeCallback(t.child,function(){t.model.detached(t.child,t.parent,t)})),t.compositionComplete&&g.current.complete(function(){t.compositionComplete(t.child,t.parent,t)})),a(),t.triggerAttach=e.noop}function c(t){if(e.isString(t.transition)){if(t.activeView){if(t.activeView==t.child)return!1;if(!t.child)return!0;if(t.skipTransitionOnSameViewId){var n=t.activeView.getAttribute("data-view"),r=t.child.getAttribute("data-view");return n!=r}}return!0}return!1}function h(e){for(var t=0,n=e.length,r=[];t<n;t++){var i=e[t].cloneNode(!0);r.push(i)}return r}function p(e){var t=h(e.parts),n=g.getParts(t),r=g.getParts(e.child);for(var i in n)s(r[i]).replaceWith(n[i])}function d(t){var n=o.virtualElements.childNodes(t),r,i;if(!e.isArray(n)){var s=[];for(r=0,i=n.length;r<i;r++)s[r]=n[r];n=s}for(r=1,i=n.length;r<i;r++)o.removeNode(n[r])}var v={},m="data-active-view",g,y=[],b=0,w="durandal-composition-data",E="data-part",S="["+E+"]",x=["model","view","transition","area","strategy","activationData"],T={complete:function(e){y.push(e)}};return g={convertTransitionToModuleId:function(e){return"transitions/"+e},defaultTransitionName:null,current:T,addBindingHandler:function(e,t,n){var r,i="composition-handler-"+e,s;t=t||o.bindingHandlers[e],n=n||function(){return undefined},s=o.bindingHandlers[e]={init:function(e,r,s,u,a){var f={trigger:o.observable(null)};return g.current.complete(function(){t.init&&t.init(e,r,s,u,a),t.update&&(o.utils.domData.set(e,i,t),f.trigger("trigger"))}),o.utils.domData.set(e,i,f),n(e,r,s,u,a)},update:function(e,t,n,r,s){var u=o.utils.domData.get(e,i);if(u.update)return u.update(e,t,n,r,s);u.trigger()}};for(r in t)r!=="init"&&r!=="update"&&(s[r]=t[r])},getParts:function(t){var n={};e.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var i=t[r];if(i.getAttribute){var o=i.getAttribute(E);o&&(n[o]=i);var u=s(S,i).not(s("[data-bind] "+S,i));for(var a=0;a<u.length;a++){var f=u.get(a);n[f.getAttribute(E)]=f}}}return n},cloneNodes:h,finalize:function(t){t.transition=t.transition||this.defaultTransitionName;if(!t.child&&!t.activeView)t.cacheViews||o.virtualElements.emptyNode(t.parent),t.triggerAttach();else if(c(t)){var r=this.convertTransitionToModuleId(t.transition);e.acquire(r).then(function(e){t.transition=e,e(t).then(function(){if(!t.cacheViews)t.child?d(t.parent):o.virtualElements.emptyNode(t.parent);else if(t.activeView){var e=n.getBindingInstruction(t.activeView);e.cacheViews!=undefined&&!e.cacheViews&&o.removeNode(t.activeView)}t.triggerAttach()})}).fail(function(t){e.error("Failed to load transition ("+r+"). Details: "+t.message)})}else{if(t.child!=t.activeView){if(t.cacheViews&&t.activeView){var i=n.getBindingInstruction(t.activeView);i.cacheViews!=undefined&&!i.cacheViews?o.removeNode(t.activeView):s(t.activeView).hide()}t.child?(t.cacheViews||d(t.parent),s(t.child).show()):t.cacheViews||o.virtualElements.emptyNode(t.parent)}t.triggerAttach()}},bindAndShow:function(e,t,i){t.child=e,t.cacheViews?t.composingNewView=o.utils.arrayIndexOf(t.viewElements,e)==-1:t.composingNewView=!0,f(t,function(){t.binding&&t.binding(t.child,t.parent,t);if(t.preserveContext&&t.bindingContext)t.composingNewView&&(t.parts&&p(t),s(e).hide(),o.virtualElements.prepend(t.parent,e),n.bindContext(t.bindingContext,e,t.model));else if(e){var i=t.model||v,u=o.dataFor(e);if(u!=i){if(!t.composingNewView){s(e).remove(),r.createView(e.getAttribute("data-view")).then(function(e){g.bindAndShow(e,t,!0)});return}t.parts&&p(t),s(e).hide(),o.virtualElements.prepend(t.parent,e),n.bind(i,e)}}g.finalize(t)},i)},defaultStrategy:function(e){return t.locateViewForObject(e.model,e.area,e.viewElements)},getSettings:function(t,n){var s=t(),u=o.utils.unwrapObservable(s)||{},a=i.isActivator(s),f;if(e.isString(u))return r.isViewUrl(u)?u={view:u}:u={model:u,activate:!0},u;f=e.getModuleId(u);if(f)return u={model:u,activate:!0},u;!a&&u.model&&(a=i.isActivator(u.model));for(var l in u)o.utils.arrayIndexOf(x,l)!=-1?u[l]=o.utils.unwrapObservable(u[l]):u[l]=u[l];return a?u.activate=!1:u.activate===undefined&&(u.activate=!0),u},executeStrategy:function(e){e.strategy(e).then(function(t){g.bindAndShow(t,e)})},inject:function(n){if(!n.model){this.bindAndShow(null,n);return}if(n.view){t.locateView(n.view,n.area,n.viewElements).then(function(e){g.bindAndShow(e,n)});return}n.strategy||(n.strategy=this.defaultStrategy),e.isString(n.strategy)?e.acquire(n.strategy).then(function(e){n.strategy=e,g.executeStrategy(n)}).fail(function(t){e.error("Failed to load view strategy ("+n.strategy+"). Details: "+t.message)}):this.executeStrategy(n)},compose:function(n,r,i,s){b++,s||(r=g.getSettings(function(){return r},n));var o=u(n);r.activeView=o.activeView,r.parent=n,r.triggerAttach=l,r.bindingContext=i,r.cacheViews&&!r.viewElements&&(r.viewElements=o.childElements),r.model?e.isString(r.model)?e.acquire(r.model).then(function(t){r.model=e.resolveObject(t),g.inject(r)}).fail(function(t){e.error("Failed to load composed module ("+r.model+"). Details: "+t.message)}):g.inject(r):r.view?(r.area=r.area||"partial",r.preserveContext=!0,t.locateView(r.view,r.area,r.viewElements).then(function(e){g.bindAndShow(e,r)})):this.bindAndShow(null,r)}},o.bindingHandlers.compose={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,i,s){var u=g.getSettings(t,e);if(u.mode){var a=o.utils.domData.get(e,w);if(!a){var f=o.virtualElements.childNodes(e);a={},u.mode==="inline"?a.view=r.ensureSingleElement(f):u.mode==="templated"&&(a.parts=h(f)),o.virtualElements.emptyNode(e),o.utils.domData.set(e,w,a)}u.mode==="inline"?u.view=a.view.cloneNode(!0):u.mode==="templated"&&(u.parts=a.parts),u.preserveContext=!0}g.compose(e,u,s,!0)}},o.virtualElements.allowedBindings.compose=!0,g}),define("durandal/events",["durandal/system"],function(e){var t=/\s+/,n=function(){},r=function(e,t){this.owner=e,this.events=t};return r.prototype.then=function(e,t){return this.callback=e||this.callback,this.context=t||this.context,this.callback?(this.owner.on(this.events,this.callback,this.context),this):this},r.prototype.on=r.prototype.then,r.prototype.off=function(){return this.owner.off(this.events,this.callback,this.context),this},n.prototype.on=function(e,n,i){var s,o,u;if(!n)return new r(this,e);s=this.callbacks||(this.callbacks={}),e=e.split(t);while(o=e.shift())u=s[o]||(s[o]=[]),u.push(n,i);return this},n.prototype.off=function(n,r,i){var s,o,u,a;if(!(o=this.callbacks))return this;if(!(n||r||i))return delete this.callbacks,this;n=n?n.split(t):e.keys(o);while(s=n.shift()){if(!(u=o[s])||!r&&!i){delete o[s];continue}for(a=u.length-2;a>=0;a-=2)r&&u[a]!==r||i&&u[a+1]!==i||u.splice(a,2)}return this},n.prototype.trigger=function(e){var n,r,i,s,o,u,a,f;if(!(r=this.callbacks))return this;f=[],e=e.split(t);for(s=1,o=arguments.length;s<o;s++)f[s-1]=arguments[s];while(n=e.shift()){if(a=r.all)a=a.slice();if(i=r[n])i=i.slice();if(i)for(s=0,o=i.length;s<o;s+=2)i[s].apply(i[s+1]||this,f);if(a){u=[n].concat(f);for(s=0,o=a.length;s<o;s+=2)a[s].apply(a[s+1]||this,u)}}return this},n.prototype.proxy=function(e){var t=this;return function(n){t.trigger(e,n)}},n.includeIn=function(e){e.on=n.prototype.on,e.off=n.prototype.off,e.trigger=n.prototype.trigger,e.proxy=n.prototype.proxy},n}),define("durandal/app",["durandal/system","durandal/viewEngine","durandal/composition","durandal/events","jquery"],function(e,t,n,r,i){function s(){return e.defer(function(t){if(u.length==0){t.resolve();return}e.acquire(u).then(function(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.install){var s=a[r];e.isObject(s)||(s={}),i.install(s),e.log("Plugin:Installed "+u[r])}else e.log("Plugin:Loaded "+u[r])}t.resolve()}).fail(function(t){e.error("Failed to load plugin(s). Details: "+t.message)})}).promise()}var o,u=[],a=[];return o={title:"Application",configurePlugins:function(t,n){var r=e.keys(t);n=n||"plugins/",n.indexOf("/",n.length-1)===-1&&(n+="/");for(var i=0;i<r.length;i++){var s=r[i];u.push(n+s),a.push(t[s])}},start:function(){return e.log("Application:Starting"),this.title&&(document.title=this.title),e.defer(function(t){i(function(){s().then(function(){t.resolve(),e.log("Application:Started")})})}).promise()},setRoot:function(r,i,s){var o,u={activate:!0,transition:i};!s||e.isString(s)?o=document.getElementById(s||"applicationHost"):o=s,e.isString(r)?t.isViewUrl(r)?u.view=r:u.model=r:u.model=r,n.compose(o,u)}},r.includeIn(o),o})
define("InMemory",function(){"use strict";function e(){var e=this;this.Store=new function(){var t=this;this.get=function(e){return t[e]};this.post=function(e,n){t[e]=ko.toJSON(n);return t[e]};this.put=function(e,n){t[e]=ko.toJSON(n);return t[e]}};this.get=function(t){return ko.utils.parseJson(e.Store.get(t))};this.post=function(t,n){return ko.utils.parseJson(e.Store.post(t,n))};this.put=function(t,n){return ko.utils.parseJson(e.Store.post(t,n))}}return e});define("bindingHandlers",function(){function e(){"use strict";var e=13;ko.bindingHandlers.enterKey={init:function(t,n,r,i){var s,o;s=function(t,r){if(r.keyCode===e){n().call(this,t,r)}};o=function(){return{keyup:s}};ko.bindingHandlers.event.init(t,o,r,i)}};ko.bindingHandlers.selectAndFocus={init:function(e,t,n){ko.bindingHandlers.hasfocus.init(e,t,n);ko.utils.registerEventHandler(e,"focus",function(){e.focus()})},update:function(e,t){ko.utils.unwrapObservable(t());setTimeout(function(){ko.bindingHandlers.hasfocus.update(e,t)},0)}}}return e});define("dataservice",function(){function e(){$.ajaxSetup({statusCode:{401:function(){location.href="/#login"}}});self.get=function(t){var n=$.Deferred();e("GET",t,{},{success:function(e){n.resolve(e)},error:function(e,t){n.rejectWith(this,[e,t])}});return n.promise()};self.post=function(t,n){var r=$.Deferred();e("POST",t,n,{success:function(e){r.resolve(e)},error:function(e,t){r.rejectWith(this,[e,t])}});return r.promise()};self.put=function(t,n){var r=$.Deferred();e("PUT",t,n,{success:function(e){r.resolve(e)},error:function(e,t){r.rejectWith(this,[e,t])}});return r.promise()};self.delete=function(t){var n=$.Deferred();e("DELETE",t,"",{success:function(e){n.resolve(e)},error:function(e,t){n.rejectWith(this,[e,t])}});return n.promise()};var e=function(e,t,n,r,i){var s="/capi"+t;var o="";if(e!="GET"){o=config.packageData(n)}if(i===undefined){i=true}$.ajax({url:s,type:e,async:i,data:o,contentType:"application/json",success:function(e){if(typeof e=="string"&&e!==""){e=JSON.parse(e)}if(r&&r.success)r.success(e)},error:function(e){if($.disableErrors){return}this.eventArgs={handledError:false};if(r&&r.error){r.error(e,this.eventArgs)}if(!this.eventArgs.handledError){}}})}}return e});define("errorlog",[],function(){function e(){var e=function(e,t,n){if(!n){n=0}return sendRequest("POST",e,{message:t},n)};this.init=function(){config.init()};this.info=function(t,n){return e("/log/info",t,n)};this.warning=function(t,n){return e("/log/warning",t,n)};this.error=function(t,n){return e("/log/error",t,n)};this.critical=function(t,n){return e("/log/critical",t,n)}}return e});define("localStorage",function(){"use strict";function e(){var e=undefined;var t=this;this.get=function(e){console.log(e);return ko.utils.parseJson(amplify.store(e))};this.post=function(e,n){amplify.store(e,ko.toJSON(n));return t.get(e)};this.put=function(e,n){amplify.store(e,n);return t.get(e)}}return e});define("ot/model",["OT"],function(e){"use strict";function t(t,n,r,i){var s=this;this.apiRoute=t||"";this.observe=n;this.subscribeCallback=i;this.isList=r;this.get=function(n,r){var i=e.DataService.get(n);if(s.observe){if(s.isList){return s.mapToObservableList(i)}else{return s.mapToObservables(i)}}else{return i}};this.post=function(n,r){return e.DataService.post(n,r)};this.put=function(n,r){return e.DataService.put(n,r)};this.mapToObservableList=function(e){var t=ko.observableArray([]);_.map(e,function(e){t.push(s.mapToObservables(e))});return t};this.mapToObservables=function(e){var t={};for(var r in e){if(n){t[r]=ko.observable(e[r]);if(i){t[r].subscribe(new Function("newValue","self.model.subscribeCallback('"+r+"',newValue);"))}}else{t[r]=e[r]}}return t}}return t});define("util",function(){function e(){"use strict";if(typeof Object.create==="undefined"){Object.create=function(e){function t(){}t.prototype=e;return new t}}Function.prototype.inherits=function(e){if(e.constructor==Function){this.prototype=new e;this.prototype.constructor=this;this.prototype.base=e.prototype}else{this.prototype=e;this.prototype.constructor=this;this.prototype.base=e}return this};Function.prototype.extends=function(e){if(e instanceof Function){var t=new e;for(var n in t){this[n]=t[n]}}else{for(var n in e){this[n]=e[n]}}return this}}return e});define("OT",["util","bindingHandlers","dataservice"],function(e,t,n){var r=new e;var i=new t;var s=new n;var o={Util:r,BindingHandlers:r,DataService:s};window.OT=o;return o});define("todo",function(){"use strict";function e(e,t){this.title=ko.observable(e);this.completed=ko.observable(t);this.editing=ko.observable(false)}return e});define("viewmodels/personal",["viewmodels/todo","ot/model","todo"],function(e,t,n){"use strict";function r(){}r.inherits(e);r.prototype.name("personal");r.prototype.activate=function(e,t){var n,r,i;i=["grocery","clean","organize","outdoor"];if(this.base.showModes[e]){n=e}else{r=e}if(t&&this.base.showModes[t])n=t;this.base.activateChild("personal",n,"personal",r);this.base.setSubLists(i)};return r});define("viewmodels/shell",["plugins/router","durandal/app"],function(e,t){return{router:e,activate:function(){e.map([{route:"",title:"Todo",moduleId:"viewmodels/todo",nav:false},{route:"todo(/:showMode)",title:"Todos",moduleId:"viewmodels/todo",hash:"#todo",nav:true},{route:"personal(/:subType)(/:showMode)",title:"Personal",moduleId:"viewmodels/personal",hash:"#personal",nav:true},{route:"work(/:subType)(/:showMode)",title:"Work",moduleId:"viewmodels/work",hash:"#work",nav:true}]).buildNavigationModel();return e.activate()}}});define("viewmodels/todo",["todo","ot/model"],function(e,t){"use strict";function n(){}var r=n.prototype;r["showModes"]={active:true,completed:true,all:true};r.baseName="todos";r.baseRoute="todo";r.model=new t;r.currentToDo=ko.observable();r.currentRoute=ko.observable("");r.currentRoute.subscribe(function(e){r.getTodos()});r.newSubList=ko.observable();r.showMode=ko.observable("all");r.name=ko.observable(r.baseName);r.todos=ko.observableArray([]);r.subLists=ko.observableArray([]);r.subList=ko.observable();r.subLists.subscribe(function(e){if(e&&e.length>0)r.model.put(r.name()+"/subLists",ko.toJSON(r.subLists))});r.setSubLists=function(e){r.getSubLists(function(t){if(!t){r.subLists(ko.utils.arrayMap(e||[],function(e){return e}))}})};r.getSubLists=function(e){var t=r.model.get(r.name()+"/subLists");r.subLists(ko.utils.arrayMap(t||[],function(e){return e}));if(e){if(t&&t.length>0){e(true)}else{e(false)}}};r.getTodos=function(){r.todos(ko.utils.arrayMap(r.model.get(r.currentRoute())||[],function(t){return new e(t.title,t.completed)}))};r.activate=function(e){r.currentRoute(r.baseRoute);r.name(r.baseName);r.subLists=ko.observableArray([]);if(e){r.showMode(e)}};r.activateChild=function(e,t,n,i){if(e){r.name(e)}if(n){r.currentRoute(n+(i?"/"+i:""))}if(i){r.subList(i)}else{r.subList("")}if(t){r.showMode(t)}else{r.showMode("all")}};r.filteredTodos=ko.computed(function(){switch(r.showMode()){case"active":return r.todos().filter(function(e){return!e.completed()});case"completed":return r.todos().filter(function(e){return e.completed()});default:return r.todos()}});r.addSubList=function(){var e=r.newSubList().trim();if(e.length>0){r.subLists.push(e);r.newSubList("")}};r.add=function(){r.currentToDo(r.currentToDo().trim());if(r.currentToDo().length>0){r.todos.push(new e(r.currentToDo(),false));r.currentToDo("")}};r.remove=function(e){r.todos.remove(e)};r.removeCompleted=function(){r.todos.remove(function(e){return e.completed()})};r.editItem=function(e){e.editing(true)};r.stopEditing=function(e){e.editing(false);if(!e.title().trim()){r.remove(e)}};r.completedCount=ko.computed(function(){return ko.utils.arrayFilter(r.todos(),function(e){return e.completed()}).length});r.remainingCount=ko.computed(function(){return r.todos().length-r.completedCount()});r.allCompleted=ko.computed({read:function(){return!r.remainingCount()},write:function(e){ko.utils.arrayForEach(r.todos(),function(t){t.completed(e)})}});ko.computed(function(){if(r.todos().length>0)r.model.put(r.currentRoute(),ko.toJSON(r.todos))}).extend({throttle:1e3});return n});define("viewmodels/work",["viewmodels/todo","ot/model","todo"],function(e,t,n){"use strict";function r(){}r.inherits(e);r.prototype.activate=function(e,t){var n,r;if(this.base.showModes[e]){n=e}else{r=e}if(t&&this.base.showModes[t])n=t;this.base.activateChild("work",n,"work",r);this.base.setSubLists(["pomodoro"])};return r})
define("knockout",function(){return window.ko});define("jquery",function(){return window.$});require(["durandal/app","durandal/viewLocator","durandal/system","localStorage","OT"],function(e,t,n,r,i){i.DataService=new r;n.debug(true);e.title="Todo Durandal";e.configurePlugins({router:true});e.start().then(function(){t.useConvention();e.setRoot("viewmodels/shell")})})


